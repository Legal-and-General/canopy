import { Meta, Markdown } from '@storybook/addon-docs/blocks';
import Feedback from '../common/feedback.md';
import {
  spaceVars,
  spacingVariables,
  allSpacingVariables,
  getSpacingDisplayName,
  getResponsiveSpacingValue
} from './spacing-utils';


<Meta title="Foundations/Layout, grid and spacing" />

# Layout, grid and spacing

<p class="standfirst">Our responsive layout grid adapts to screen size and orientation, ensuring consistency across layouts. Our common approach across design and development enables us to remain in sync during the development process.</p>

The grid system is useful for responsive page layouts but we recommend that it is used sparingly; for the majority of cases you may be better off just using flexbox.

## How it works

The grid system is based on a subset of the excellent <a href="http://flexboxgrid.com/" target="_blank">Flexbox Grid</a> by <a href="http://github.com/kristoferjoseph" target="_blank">kristoferjoseph</a>. The code is a direct port with some additional modifications to:

* Add `lg-` prefixes to reduce risk of clash with existing libraries
* Modify spacing variables to match our own spacing system
* Force all containers to be fluid width
* Remove parts of the grid which we may not need.

## Usage

Import the css (or scss) into your application by following the instructions <a href="https://github.com/Legal-and-General/canopy/blob/master/docs/USAGE.md#import-the-global-css" target="_blank">outlined in our documentation</a>.

## Breakpoints

We have five breakpoints: SM (smallest), MD, LG, XL, and XXL (largest). These breakpoints correspond to various device sizes, making it crucial to prioritise design for the smallest size first to ensure an optimal experience for all users.

If you're primarily focusing on a desktop use case, avoid the common misconception that smaller breakpoints are unnecessary. Many users tend to resize their browser windows for multitasking, and others may zoom in on their browser as well.

When designing, always begin with the smallest size. For the SM breakpoint, you might design for a width of 360px, but it's essential to ensure that your design can reflow at 320px. This method helps maintain AA accessibility standards.


| Breakpoint | Min-width | Max-width | Margin | Gutter |
|------------|-----------|-----------|--------|--------|
| SM         | 0         | 767       | 16px   | 28px   |
| MD         | 768       | 1023      | 28px   | 28px   |
| LG         | 1024      | 1279      | 32px   | 32px   |
| XL         | 1280      | 1439      | 72px   | 32px   |
| XXL        | 1440      | No max    | 104px  | 32px   |


Our flexible grid is made up of three elements; percentage-based columns, fixed margins and gutters. The columns are used to adjust the layout, making the best use of the space available.

Additionally, the grid can be nested, to allow layout rules to be applied within smaller elements.

## Baseline grid and spacing

Don't be afraid to use liberal vertical spacing â€“ white space is an asset the helps break up content, aid user comprehension and provide pace and vertical rhythm.

### Variables

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th colSpan={2}>SM-MD</th>
      <th colSpan={2}>LG upwards</th>
    </tr>
    <tr>
      <th></th>
      <th>px</th>
      <th>Rem</th>
      <th>px</th>
      <th>Rem</th>
    </tr>
  </thead>
  <tbody>
  {spaceVars.map(([name, value]) => {
  const cssVariable = `var(${name})`;
  const smMd = getResponsiveSpacingValue(cssVariable, 'sm-md', allSpacingVariables);
  const lgUp = getResponsiveSpacingValue(cssVariable, 'lg-up', allSpacingVariables);

  return (
    <tr key={name}>
      <td><code>{getSpacingDisplayName(name)}</code></td>
      <td>{smMd.px}</td>
      <td>{smMd.rem}</td>
      <td>{lgUp.px}</td>
      <td>{lgUp.rem}</td>
    </tr>
  );
  })}
  </tbody>
</table>

### Components padding

| Name                  | Value from 0 to md breakpoint | Value from md breakpoint |
|-----------------------|-------------------------------|--------------------------|
| `--component-padding` | `var(--space-1)`              | `var(--space-6)`         |

### Components margin

| Name                  | Value from 0 to lg breakpoint | Value from lg breakpoint |
|-----------------------|-------------------------------|--------------------------|
| `--component-margin`  | `var(--space-5)`              | `var(--space-6)`         |

## Additional directives

* A set of [Angular directives](./?path=/docs/helpers-directives-grid-guide--docs) are also supplied which can be used to add grid classes to native HTML and Canopy elements
* There is also a [row-gap spacing directive](./?path=/docs/helpers-directives-row-gap-guide--docs) to enable the use of the CSS row-gap property
* There are also two utility directives available which allow you to show/hide components at different breakpoints:
  * [LgShowAt](./?path=/docs/helpers-directives-show-at-guide--docs)
  * [LgHideAt](./?path=/docs/helpers-directives-hide-at-guide--docs)

<Markdown>
  {Feedback}
</Markdown>
