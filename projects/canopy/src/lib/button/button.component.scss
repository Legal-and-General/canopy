@use '../../styles/mixins.scss';

.lg-btn {
  appearance: none;
  @include mixins.lg-unstyled-link;

  transition: background-color var(--animation-duration) var(--animation-fn);
  display: flex;
  min-width: var(--button-common-labelled-min-width);
  min-height: var(--button-common-labelled-min-height);
  padding: var(--button-common-labelled-padding-y) var(--button-common-labelled-padding-x);
  justify-content: center;
  align-items: center;
  position: relative;
  color: var(--button-primary-rest-colour);
  font-feature-settings: 'case' on;
  font-family: var(--typeface-productive);
  font-size: var(--font-size-1);
  font-style: normal;
  font-weight: var(--font-weight-500);
  line-height: var(--line-height-1);
  letter-spacing: var(--letter-spacing-normal-productive);
  border-radius: var(--button-border-radius);
  border: var(--button-border-width) solid var(--button-primary-rest-border-colour);
  background: var(--button-primary-rest-background-colour);
  width: 100%;
  cursor: pointer;
  text-align: center;
  margin-bottom: var(--component-margin);
  text-decoration: none;

  &:not(&--loading):disabled {
    background-color: var(--button-primary-disabled-background-colour);
    border: var(--button-primary-disabled-border-colour) solid var(--button-border-width);
    color: var(--button-primary-disabled-colour);
    cursor: not-allowed;
  }

  &__hidden-content {
    display: flex;
    position: relative;
    visibility: hidden;
  }

  &__spinner {
    position: absolute;
    inset: 0;
  }

  &--loading {
    cursor: not-allowed;
  }

  .lg-icon {
    margin-left: var(--button-gap);
    height: var(--space-4);
    width: var(--space-4);
  }

  &--icon-left {
    justify-content: flex-start;

    .lg-icon {
      margin-left: 0;
      margin-right: var(--button-gap);
    }
  }

  &:is(a) .lg-icon {
    margin-right: 0;
  }

  // Always full width on 'sm', above 'sm' only when --block is applied`
  @include mixins.lg-breakpoint('md') {
    display: inline-flex;
    width: auto;

    &--block {
      display: flex;
      width: 100%;
    }
  }

  &--icon-only {
    min-width: auto;
    width: auto;
    display: inline-flex;
    padding: var(--button-common-icon-only-padding-y)
      var(--button-common-icon-only-padding-x);

    .lg-btn__text {
      @include mixins.lg-visually-hidden;
    }

    .lg-icon {
      margin-left: 0;
      margin-right: 0;
      height: var(--space-5);
      width: var(--space-5);
    }
  }
}

.lg-btn--link {
  border: none;
  background: none;
  min-height: 0;
  min-width: 0;

  @include mixins.lg-link();
}

.lg-btn-toggle--active > .lg-icon[name='chevron-down'] {
  transform: rotateX(180deg);
}

$variants: 'primary', 'secondary', 'add-on' !default;

@each $variant in $variants {
  .lg-btn--#{$variant},
  .lg-btn--#{$variant}:visited {
    background-color: var(--button-#{$variant}-rest-background-colour);
    border: var(--button-border-width) solid var(--button-#{$variant}-rest-border-colour);
    color: var(--button-#{$variant}-rest-colour);

    &:hover {
      border-radius: var(--button-border-radius);
      border: var(--button-border-width)
        solid
        var(--button-#{$variant}-hover-border-colour);
      background: var(--button-primary-hover-background-colour);
      color: var(--button-#{$variant}-hover-colour);
    }

    &:not(:disabled) {
      &:active:not(.lg-btn-toggle--active),
      &:active:hover:not(.lg-btn-toggle--active),
      &.lg-btn-toggle--active {
        border-radius: var(--button-border-radius);
        border: var(--button-border-width)
          solid
          var(--button-#{$variant}-active-border-colour);
        background: var(--button-#{$variant}-active-background-colour);
        color: var(--button-#{$variant}-active-colour);
      }

      &:hover {
        border-radius: var(--button-border-radius);
        border: var(--button-border-width)
          solid
          var(--button-#{$variant}-hover-border-colour);
        background: var(--button-primary-hover-background-colour);
        color: var(--button-#{$variant}-hover-colour);
      }
    }
  }

  .lg-btn--#{$variant}:focus-visible:not(.lg-btn-toggle) {
    color: var(--button-#{$variant}-focus-colour);
    border: var(--button-border-width-focus) solid var(--button-#{$variant}-focus-colour);
    background: var(--button-#{$variant}-focus-background-colour);
    box-shadow: 0
      0
      0
      var(--button-border-width)
      var(--button-#{$variant}-focus-background-colour);
    border-radius: var(--button-border-radius);
    outline: 0 !important;

    &:not(:disabled) {
      &:active,
      &:active:hover,
      &:hover {
        border-color: transparent;
      }
    }
  }
}
